# 存储密集型测试程序
# 执行大量内存读写指令

.text
    # 初始化寄存器
    li x1, 0      # 内存地址
    li x2, 5    # 目标值
    li x3, 1      # 写入值
    li x4, 0      # 临时寄存器1
    li x5, 0      # 临时寄存器2
    li x6, 0      # 临时寄存器3
    li x7, 0      # 临时寄存器4

loop:
    # 执行一系列内存操作（每次循环20条指令）
    sw x3, 0(x1)      # 存储字
    lw x4, 0(x1)      # 加载字
    sb x3, 4(x1)      # 存储字节
    lb x5, 4(x1)      # 加载字节
    sh x3, 8(x1)      # 存储半字
    lh x6, 8(x1)      # 加载半字
    
    sw x4, 12(x1)     # 存储字
    lw x5, 12(x1)     # 加载字
    sb x4, 16(x1)     # 存储字节
    lb x6, 16(x1)     # 加载字节
    sh x4, 20(x1)     # 存储半字
    lh x7, 20(x1)     # 加载半字
    
    sw x5, 24(x1)     # 存储字
    lw x6, 24(x1)     # 加载字
    sb x5, 28(x1)     # 存储字节
    lb x7, 28(x1)     # 加载字节
    sh x5, 32(x1)     # 存储半字
    lh x4, 32(x1)     # 加载半字
    
    # 增加地址和值
    addi x1, x1, 36   # 增加内存地址
    addi x3, x3, 1    # 增加写入值
    
    # 检查是否达到目标值
    bne x3, x2, loop
    
    # 程序结束
    ebreak 